{% extends "base.html" %}

{% block head %}
    {{ super() }}
    <link rel="stylesheet" href="{{ url_for('static', filename='style/edit_profile.css') }}">
{% endblock head %}

{% block content %}
    {% include "header.html" %}
    {% include "flash.html" %}

    <div class="edit-user-container">
        <h1>Editar Perfil</h1>

        <form method="POST" class="edit-user-form" action="{{ url_for('edit_profile') }}">
            <div class="form-group">
                <label for="username">Nome</label>
                <input type="text" id="username" name="username" value="{{ current_user.name }}" required>
            </div>

            <div class="form-group">
                <label for="email">E-mail</label>
                <input type="email" id="email" name="email" value="{{ current_user.id }}" required>
            </div>

            <div class="form-group">
                <label for="password">Senha</label>
                <input type="password" id="password" name="password" placeholder="Digite a nova senha (opcional)">
            </div>

            <div class="form-buttons">
                <button type="submit" class="btn-save">Salvar Altera√ß√µes</button>
                <a href="{{ url_for('edit_profile') }}" class="btn-cancel">Cancelar</a>
            </div>
        </form>
    </div>

    <div class="reviews-container">
        <h2>Minhas Reviews</h2>
        {% if reviews %}
            <ul class="reviews-list">
                {% for review in reviews %}
                    <li class="review-item">
                        <div class="review-info">
                            <strong>{{ review.title }}</strong> ({{ review.year }})  
                            <span class="rating">‚≠ê {{ review.rating }}/5</span>
                            {% if review.review %}
                                <p class="review-text">{{ review.review }}</p>
                            {% endif %}
                        </div>
                        <form method="POST" action="{{ url_for('edit_profile') }}" class="delete-form">
                            <input type="hidden" name="delete_review" value="{{ review.id }}">
                            <button type="submit" class="btn-delete" title="Deletar review">üóëÔ∏è</button>
                        </form>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="no-reviews">You haven't write any reviews.</p>
        {% endif %}
    </div>

    {% include "footer.html" %}
{% endblock content %}
